<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">

<title>腕立て伏せカウンター｜カメラで自動回数計測できる無料Webアプリ</title>

<meta name="description" content="腕立て伏せカウンターの決定版。スマホやPCのカメラで腕立て伏せの回数を自動カウント。インストール不要・無料・目標回数設定・音通知対応。">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="robots" content="index, follow">
<link rel="canonical" href="https://muscle-trainer.github.io/pushupcounter/">

<meta name="google-site-verification" content="YOUR_VERIFICATION_CODE_HERE">
<meta name="theme-color" content="#111827">

<script src="https://cdn.jsdelivr.net/npm/@mediapipe/pose/pose.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>

<style>
:root {
  --primary: #2563eb;
  --primary-dark: #1e40af;
  --bg: linear-gradient(135deg, #0f172a, #020617);
  --card: #ffffff;
  --text: #111827;
  --muted: #6b7280;
}

body {
  margin: 0;
  padding: 0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background: var(--bg);
  color: var(--text);
}

.container {
  max-width: 520px;
  margin: 0 auto;
  padding: 16px;
}

.app {
  background: var(--card);
  border-radius: 24px;
  padding: 20px;
  box-shadow: 0 20px 40px rgba(0,0,0,0.35);
}

h1 {
  text-align: center;
  font-size: 1.6rem;
  margin-bottom: 8px;
}

.subtitle {
  text-align: center;
  color: var(--muted);
  font-size: 0.95rem;
  margin-bottom: 16px;
}

video {
  width: 100%;
  border-radius: 18px;
  background: #000;
}

.counter {
  margin: 18px auto;
  width: 140px;
  height: 140px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--primary-dark));
  color: #fff;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  font-weight: bold;
}

.controls {
  text-align: center;
  margin-bottom: 10px;
}

input {
  padding: 10px;
  font-size: 1rem;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  width: 100px;
}

.buttons {
  display: flex;
  gap: 8px;
  justify-content: center;
  margin-top: 10px;
}

button {
  flex: 1;
  padding: 12px;
  font-size: 1rem;
  border-radius: 14px;
  border: none;
  color: #fff;
  cursor: pointer;
}

button.start { background: #16a34a; }
button.pause { background: #f59e0b; }
button.reset { background: #dc2626; }

section {
  margin-top: 28px;
  background: var(--card);
  border-radius: 20px;
  padding: 18px;
}

.warning {
  display: none;
  background: #fee2e2;
  color: #991b1b;
  padding: 10px;
  border-radius: 12px;
  margin-bottom: 12px;
}
</style>
</head>

<body>

<div class="container">

<div id="line-warning" class="warning">
LINEアプリ内ブラウザではカメラが使用できません。<br>
右上「︙」→「ブラウザで開く」を選択してください。
</div>

<div class="app">

<h1>腕立て伏せカウンター</h1>
<div class="subtitle">カメラで自動回数計測・無料Webアプリ</div>

<video id="video" playsinline></video>

<div class="counter"><span id="count">0</span></div>

<div class="controls">
目標回数<br>
<input type="number" id="target" value="10" min="1">
</div>

<div class="buttons">
<button class="start" id="start">スタート</button>
<button class="pause" id="pause">一時停止</button>
<button class="reset" id="reset">リセット</button>
</div>

</div>

<section>
<h2>腕立て伏せを自動でカウント</h2>
<p>
スマホやPCのカメラで腕立て伏せの回数を自動カウント。
インストール不要・無料で使えるトレーニング支援Webアプリです。
</p>
</section>

<section>
<h2>使い方</h2>
<ol>
<li>カメラの前に立ちます</li>
<li>スタートを押します</li>
<li>腕立て伏せを行います</li>
</ol>
</section>

<audio id="countSound" src="count.mp3"></audio>
<audio id="goalSound" src="goal.mp3"></audio>

</div>

<script>
if (/Line/i.test(navigator.userAgent)) {
  document.getElementById("line-warning").style.display = "block";
}

let count = 0;
let running = false;
let position = null;

const countEl = document.getElementById("count");
const targetEl = document.getElementById("target");
const countSound = document.getElementById("countSound");
const goalSound = document.getElementById("goalSound");

const pose = new Pose({
  locateFile: f => `https://cdn.jsdelivr.net/npm/@mediapipe/pose/${f}`
});

pose.setOptions({
  minDetectionConfidence: 0.7,
  minTrackingConfidence: 0.7
});

pose.onResults(r => {
  if (!running || !r.poseLandmarks) return;
  const lm = r.poseLandmarks;

  if (lm[12].y > lm[14].y && lm[11].y > lm[13].y) position = "down";

  if (lm[12].y < lm[14].y && lm[11].y < lm[13].y && position === "down") {
    position = "up";
    count++;
    countEl.textContent = count;
    countSound.play();

    if (count >= Number(targetEl.value)) {
      goalSound.play();
      running = false;
      alert("目標達成！");
    }
  }
});

const camera = new Camera(document.getElementById("video"), {
  onFrame: async () => pose.send({ image: video }),
  width: 640,
  height: 480
});

camera.start();

document.getElementById("start").onclick = () => running = true;
document.getElementById("pause").onclick = () => running = false;
document.getElementById("reset").onclick = () => {
  running = false;
  count = 0;
  position = null;
  countEl.textContent = 0;
};
</script>

</body>
</html>
